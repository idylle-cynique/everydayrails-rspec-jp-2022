# Everyday Rails Rspec Chapter.04

## このチャプターで学ぶこと
 - FactoryBotの使い方

### 仕様
 - `FactoryBot.new`
     - fixture同様に直に値を挿入する
 - `FactoryBot.build`
 	 - 新規にテスト用のオブジェクトがセットアップされ、指定したタイミングで都度生成される。
 - `FactoryBot.create`
 	 - アプリケーションのテスト用データベースにオブジェクトを永続化する。
 - 別途Factoryのモデルに記述を追加しない限りあるFactoryBotから生成したモデルを元に関連するモデルを生成しようとすると、関連するモデルの生成の都度、その生成元となるモデルを再生成してしまうので注意
 - Factoryでテストしたいモデルの関連付けを再現する場合、関連付けの記述に用いている値(実際の参照の仕方)通りに参照を行わない場合、直接的に紐付いたオブジェクトが生成されないので注意する必要がある
 	- `aliases: [:model_name]`のようにして参照に使うモデルの呼び出し用メソッドをエイリアスとしてFactoryBot上で定義しておく必要がある
 - factoryメソッドのブロック内にさらにfactoryをネストさせることで、元のオブジェクトのうちの一部をオーバーライドしたテストデータを生成・呼び出し可能にする
 - factoryメソッドのような使い方をできるメソッドとして、traitメソッドというものもある

#### コールバック
Factory内のあるメソッドを実行する前後などのフックに応じてコールバック処理を追加することが出来る
 - `create_list`
    - モデルの生成

### `factories`ディレクトリ
 - association(:arg_symbol)
 	- 対象のFactoryオブジェクトに関連するモデルを銘記する